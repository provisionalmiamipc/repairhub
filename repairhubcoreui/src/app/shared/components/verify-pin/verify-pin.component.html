<div class="min-vh-100 d-flex align-items-center justify-content-center py-4" style="background: var(--cui-body-bg);">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-5 col-md-7 col-sm-9">
        <!-- Card Principal -->
        <div class="card border-0 shadow">
          <!-- Header con gradiente profesional -->
          <div class="card-header p-5 text-center border-0" style="background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);">
            <div class="mb-3">
              <i class="bi bi-shield-lock-fill text-white" style="font-size: 3.5rem;"></i>
            </div>
            <h3 class="text-white fw-bold mb-1">Verificación de Sesión</h3>
            <p class="text-white-50 small mb-0">Seguridad activada</p>
          </div>

          <!-- Body -->
          <div class="card-body p-5">
            <!-- Descripción -->
            <div class="text-center mb-4">
              <p class="text-body-secondary mb-2">
                Por razones de seguridad, ingresa tu código PIN de 4 dígitos para continuar.
              </p>
            </div>

            <!-- Formulario -->
            <form (ngSubmit)="verifyPin()" class="needs-validation">
              <!-- PIN Input -->
              <div class="mb-4">
                <label for="pinInput" class="form-label fw-semibold">Código PIN</label>
                <input
                  type="password"
                  id="pinInput"
                  class="form-control form-control-lg text-center fw-bold"
                  [class.is-invalid]="errorMessage"
                  [(ngModel)]="pin"
                  (input)="onPinInput($event)"
                  name="pin"
                  maxlength="4"
                  placeholder="••••"
                  inputmode="numeric"
                  pattern="[0-9]{4}"
                  required
                  autofocus
                  style="font-size: 2rem; letter-spacing: 0.5rem; background-color: var(--cui-input-bg); color: var(--cui-body-color);">
                
                <!-- Mensajes de error -->
                <div class="invalid-feedback d-block" *ngIf="errorMessage">
                  <i class="bi bi-exclamation-triangle-fill me-2"></i>
                  {{ errorMessage }}
                </div>
              </div>

              <!-- Botón de envío -->
              <button
                type="submit"
                class="btn btn-lg btn-dark w-100 fw-semibold mb-3 d-flex align-items-center justify-content-center"
                [disabled]="pin.length !== 4 || isLoading"
                style="background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); border: none;">
                <i class="bi bi-unlock-fill me-2" *ngIf="!isLoading"></i>
                <span class="spinner-border spinner-border-sm me-2" *ngIf="isLoading" role="status" aria-hidden="true"></span>
                {{ isLoading ? 'Verificando...' : 'Desbloquear Sesión' }}
              </button>

              <!-- Botón secundario (Salir) -->
              <button
                type="button"
                class="btn btn-outline-secondary w-100 fw-semibold"
                (click)="onLogout()"
                [disabled]="isLoading">
                <i class="bi bi-box-arrow-right me-2"></i>
                Cerrar Sesión
              </button>
            </form>

            <!-- Advertencia de seguridad -->
            <div class="alert alert-info d-flex align-items-start mt-4 mb-0 border-0" role="alert" style="background-color: var(--cui-info-bg-subtle); color: var(--cui-info-text);">
              <i class="bi bi-info-circle-fill me-2 mt-1 flex-shrink-0"></i>
              <small>
                Tu sesión se bloquea automáticamente después de un período de inactividad por seguridad.
              </small>
            </div>
          </div>

          <!-- Footer -->
          <div class="card-footer border-top p-4 text-center" style="background-color: var(--cui-card-cap-bg);">
            <small class="text-body-secondary d-block mb-2">
              ¿Problemas para acceder?
            </small>
            <a href="mailto:soporte@repairhub.com" class="text-decoration-none fw-semibold">
              <i class="bi bi-headset me-1"></i>
              <small>Contactar Soporte Técnico</small>
            </a>
          </div>
        </div>

        <!-- Información adicional -->
        <div class="text-center mt-4">
          <p class="text-body-secondary small mb-0">
            <i class="bi bi-shield-check me-1"></i>
            Conexión protegida y encriptada SSL/TLS
          </p>
        </div>
      </div>
    </div>
  </div>
</div>