<div class="stores-list-container" @fadeInUp>
  <!-- Header Section -->
  <div class="list-header" @slideDown>
    <div class="header-content">
      <div>
        <h1 class="page-title">Stores</h1>
        <p class="page-subtitle">Manage all stores in your system</p>
      </div>
      <button class="btn-new" (click)="onNew()" [attr.aria-label]="'New store'">
        <span class="btn-icon"><i class="bi bi-plus"></i></span>
        New Store
      </button>
    </div>
  </div>

  <!-- Search and Filter Section -->
  <div class="search-filter-section" @slideDown>
    <div class="search-box">
      <span class="search-icon"><i class="bi bi-search"></i></span>
      <input
        type="text"
        class="search-input"
        placeholder="Search by name, code, city or email..."
        (input)="onSearchChange($any($event).target.value)"
        [attr.aria-label]="'Search stores'"
      />
    </div>

    <div class="filter-controls">
      <select
        class="select-filter"
        (change)="onFilterChange($any($event).target.value)"
        [attr.aria-label]="'Filter stores'"
      >
        <option value="all">All</option>
        <option value="1">Center 1</option>
        <option value="2">Center 2</option>
      </select>

      <select
        class="select-filter"
        (change)="onSortChange($any($event).target.value)"
        [attr.aria-label]="'Sort stores'"
      >
        <option value="name">Sort by: Name</option>
        <option value="code">Code</option>
        <option value="city">City</option>
      </select>
    </div>
  </div>

  <!-- Error State -->
  @if (error()) {
  <div class="error-state" @fadeInUp>
    <div class="error-content">
      <span class="error-icon"><i class="bi bi-exclamation-triangle-fill"></i></span>
      <div>
        <h3>Error loading</h3>
        <p>{{ error() }}</p>
      </div>
      <button class="btn-retry" (click)="retryLoad()">Retry</button>
    </div>
  </div>
  }

  <!-- Loading State -->
  @if (isLoading()) {
  <div class="loading-grid" @fadeInUp>
    @for (i of [1, 2, 3, 4, 5, 6]; track i) {
    <div class="skeleton-card">
      <div class="skeleton skeleton-header"></div>
      <div class="skeleton skeleton-text"></div>
      <div class="skeleton skeleton-text"></div>
      <div class="skeleton skeleton-footer"></div>
    </div>
    }
  </div>
  }

  <!-- Cards Grid -->
  @if (!isLoading()) {
  <div class="stores-grid">
    @if (isEmptyState()) {
    <div class="empty-state" @fadeInUp>
      <div class="empty-icon"><i class="bi bi-shop"></i></div>
      <h3>No stores</h3>
      <p>Start by creating your first store</p>
      <button class="btn-empty" (click)="onNew()">Create Store</button>
    </div>
    } @else {
    @for (store of filteredStores(); track store.id) {
    <div class="store-card" @cardEnter>
      <!-- Card Header -->
      <div class="card-header">
        <div class="store-badge">{{ store.storeCode }}</div>
        <div class="card-actions">
          <button
            class="btn-action btn-view"
            (click)="onView(store)"
            title="View details"
            [attr.aria-label]="'View details of ' + store.storeName"
          >
            <i class="bi bi-eye"></i>
          </button>
          <button
            class="btn-action btn-edit"
            (click)="onEdit(store)"
            title="Edit"
            [attr.aria-label]="'Edit ' + store.storeName"
          >
            <i class="bi bi-pencil"></i>
          </button>
          <!--button
            class="btn-action btn-delete"
            (click)="onDelete(store)"
            title="Delete"
            [attr.aria-label]="'Delete ' + store.storeName"
          >
            üóëÔ∏è
          </button-->
        </div>
      </div>

      <!-- Store Info -->
      <div class="store-info">
        <h3 class="store-name">{{ store.storeName }}</h3>
        <p class="store-meta">{{ store.city }}, {{ store.state }}</p>
      </div>

      <!-- Store Details Grid -->
      <div class="details-grid">
        <div class="detail-item">
          <span class="detail-label"><i class="bi bi-geo-alt"></i> Address</span>
          <span class="detail-value">{{ store.address }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label"><i class="bi bi-envelope"></i> Email</span>
          <span class="detail-value">{{ store.email }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label"><i class="bi bi-telephone"></i> Phone</span>
          <span class="detail-value">{{ store.phoneNumber || 'N/A' }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label"><i class="bi bi-globe"></i> Website</span>
          <span class="detail-value">{{ store.webSite || 'N/A' }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label"><i class="bi bi-mailbox2"></i> Postal Code</span>
          <span class="detail-value">{{ store.zipCode }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label"><i class="bi bi-clock"></i> Time Zone</span>
          <span class="detail-value">{{ store.time_zone }}</span>
        </div>
      </div>

      <!-- Card Footer -->
      <div class="card-footer">
        <span class="created-date">Created: {{ store.createdAt | date: 'short' }}</span>
      </div>
    </div>
    }
    }
  </div>
  }

  <!-- Results Counter -->
  @if (!isLoading() && filteredStores().length > 0) {
  <div class="results-info">
    Showing {{ filteredStores().length }} of {{ stores().length }} stores
  </div>
  }
</div>
