<div class="stores-list-container" @fadeInUp>
  <!-- Header Section -->
  <div class="list-header" @slideDown>
    <div class="header-content">
      <div>
        <h1 class="page-title">Tiendas</h1>
        <p class="page-subtitle">Administra todas las tiendas de tu sistema</p>
      </div>
      <button class="btn-new" (click)="onNew()" [attr.aria-label]="'Nueva tienda'">
        <span class="btn-icon"><i class="bi bi-plus"></i></span>
        Nueva Tienda
      </button>
    </div>
  </div>

  <!-- Search and Filter Section -->
  <div class="search-filter-section" @slideDown>
    <div class="search-box">
      <span class="search-icon"><i class="bi bi-search"></i></span>
      <input
        type="text"
        class="search-input"
        placeholder="Busca por nombre, c√≥digo, ciudad o email..."
        (input)="onSearchChange($any($event).target.value)"
        [attr.aria-label]="'Buscar tiendas'"
      />
    </div>

    <div class="filter-controls">
      <select
        class="select-filter"
        (change)="onFilterChange($any($event).target.value)"
        [attr.aria-label]="'Filtrar tiendas'"
      >
        <option value="all">Todos</option>
        <option value="1">Centro 1</option>
        <option value="2">Centro 2</option>
      </select>

      <select
        class="select-filter"
        (change)="onSortChange($any($event).target.value)"
        [attr.aria-label]="'Ordenar tiendas'"
      >
        <option value="name">Ordenar por: Nombre</option>
        <option value="code">C√≥digo</option>
        <option value="city">Ciudad</option>
      </select>
    </div>
  </div>

  <!-- Error State -->
  @if (error()) {
  <div class="error-state" @fadeInUp>
    <div class="error-content">
      <span class="error-icon"><i class="bi bi-exclamation-triangle-fill"></i></span>
      <div>
        <h3>Error al cargar</h3>
        <p>{{ error() }}</p>
      </div>
      <button class="btn-retry" (click)="retryLoad()">Reintentar</button>
    </div>
  </div>
  }

  <!-- Loading State -->
  @if (isLoading()) {
  <div class="loading-grid" @fadeInUp>
    @for (i of [1, 2, 3, 4, 5, 6]; track i) {
    <div class="skeleton-card">
      <div class="skeleton skeleton-header"></div>
      <div class="skeleton skeleton-text"></div>
      <div class="skeleton skeleton-text"></div>
      <div class="skeleton skeleton-footer"></div>
    </div>
    }
  </div>
  }

  <!-- Cards Grid -->
  @if (!isLoading()) {
  <div class="stores-grid">
    @if (isEmptyState()) {
    <div class="empty-state" @fadeInUp>
      <div class="empty-icon"><i class="bi bi-shop"></i></div>
      <h3>No hay tiendas</h3>
      <p>Comienza creando tu primera tienda</p>
      <button class="btn-empty" (click)="onNew()">Crear Tienda</button>
    </div>
    } @else {
    @for (store of filteredStores(); track store.id) {
    <div class="store-card" @cardEnter>
      <!-- Card Header -->
      <div class="card-header">
        <div class="store-badge">{{ store.storeCode }}</div>
        <div class="card-actions">
          <button
            class="btn-action btn-view"
            (click)="onView(store)"
            title="Ver detalles"
            [attr.aria-label]="'Ver detalles de ' + store.storeName"
          >
            <i class="bi bi-eye"></i>
          </button>
          <button
            class="btn-action btn-edit"
            (click)="onEdit(store)"
            title="Editar"
            [attr.aria-label]="'Editar ' + store.storeName"
          >
            <i class="bi bi-pencil"></i>
          </button>
          <!--button
            class="btn-action btn-delete"
            (click)="onDelete(store)"
            title="Eliminar"
            [attr.aria-label]="'Eliminar ' + store.storeName"
          >
            üóëÔ∏è
          </button-->
        </div>
      </div>

      <!-- Store Info -->
      <div class="store-info">
        <h3 class="store-name">{{ store.storeName }}</h3>
        <p class="store-meta">{{ store.city }}, {{ store.state }}</p>
      </div>

      <!-- Store Details Grid -->
      <div class="details-grid">
        <div class="detail-item">
          <span class="detail-label"><i class="bi bi-geo-alt"></i> Direcci√≥n</span>
          <span class="detail-value">{{ store.address }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label"><i class="bi bi-envelope"></i> Email</span>
          <span class="detail-value">{{ store.email }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label"><i class="bi bi-telephone"></i> Tel√©fono</span>
          <span class="detail-value">{{ store.phoneNumber || 'N/A' }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label"><i class="bi bi-globe"></i> Sitio Web</span>
          <span class="detail-value">{{ store.webSite || 'N/A' }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label"><i class="bi bi-mailbox2"></i> C√≥digo Postal</span>
          <span class="detail-value">{{ store.zipCode }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-label"><i class="bi bi-clock"></i> Zona Horaria</span>
          <span class="detail-value">{{ store.time_zone }}</span>
        </div>
      </div>

      <!-- Card Footer -->
      <div class="card-footer">
        <span class="created-date">Creado: {{ store.createdAt | date: 'short' }}</span>
      </div>
    </div>
    }
    }
  </div>
  }

  <!-- Results Counter -->
  @if (!isLoading() && filteredStores().length > 0) {
  <div class="results-info">
    Mostrando {{ filteredStores().length }} de {{ stores().length }} tiendas
  </div>
  }
</div>
