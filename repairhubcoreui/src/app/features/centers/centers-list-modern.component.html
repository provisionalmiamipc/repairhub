<div class="centers-list-container">
  <!-- HEADER -->
  <div class="list-header">
    <div class="header-content">
      <div class="title-section">
        <h1 class="page-title">Centros de Servicio</h1>
        <p class="page-subtitle">Gestiona todos tus centros de operación</p>
      </div>
      <button class="btn-create-primary" (click)="onCreateNew()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
        Nuevo Centro
      </button>
    </div>
  </div>

  <!-- ERROR MESSAGE -->
  @if (error()) {
    <div class="alert-error" @fadeInOut>
      <div class="alert-content">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="8" x2="12" y2="12"></line>
          <line x1="12" y1="16" x2="12.01" y2="16"></line>
        </svg>
        <span>{{ error() }}</span>
      </div>
      <button class="btn-close-alert" (click)="clearError()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
  }

  <!-- SEARCH & FILTER -->
  <div class="search-section">
    <div class="search-box">
      <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.35-4.35"></path>
      </svg>
      <input
        type="text"
        placeholder="Buscar por nombre, código, ciudad..."
        class="search-input"
        [value]="searchQuery()"
        (input)="updateSearch($event.target.value)"
      />
      @if (searchQuery()) {
        <button class="btn-clear-search" (click)="clearSearch()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      }
    </div>
  </div>

  <!-- STATS -->
  @if (!isEmpty()) {
    <div class="stats-bar">
      <div class="stat-item">
        <span class="stat-label">Total</span>
        <span class="stat-value">{{ stats().total }}</span>
      </div>
      @if (searchQuery()) {
        <div class="stat-item">
          <span class="stat-label">Resultados</span>
          <span class="stat-value">{{ stats().filtered }}</span>
        </div>
      }
    </div>
  }

  <!-- LOADING STATE -->
  @if (loading()) {
    <div class="loading-container">
      <div class="skeleton-grid">
        @for (i of [1, 2, 3, 4, 5, 6]; track i) {
          <div class="skeleton-card"></div>
        }
      </div>
    </div>
  }

  <!-- EMPTY STATE -->
  @if (isEmpty()) {
    <div class="empty-state">
      <div class="empty-icon">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
          <rect x="3" y="3" width="7" height="7"></rect>
          <rect x="14" y="3" width="7" height="7"></rect>
          <rect x="14" y="14" width="7" height="7"></rect>
          <rect x="3" y="14" width="7" height="7"></rect>
        </svg>
      </div>
      <h3 class="empty-title">No hay centros registrados</h3>
      <p class="empty-message">Comienza creando tu primer centro de servicio</p>
      <button class="btn-empty-action" (click)="onCreateNew()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
        Crear Centro
      </button>
    </div>
  }

  <!-- CENTERS GRID -->
  @if (!loading() && hasResults()) {
    <div class="centers-grid">
      @for (center of filteredItems(); track center.id; let isLast = $last) {
        <div class="center-card" @cardEnter>
          <!-- Card Header Background -->
          <div class="card-header-bg" [style.background]="getColorHash(center.id)"></div>

          <!-- Card Content -->
          <div class="card-content">
            <!-- Center Info -->
            <div class="center-info">
              <div class="center-avatar" [style.backgroundColor]="getColorHash(center.id)">
                {{ getInitials(center.centerName) }}
              </div>
              <div class="center-details">
                <h3 class="center-name">{{ center.centerName }}</h3>
                <p class="center-code">{{ center.centerCode }}</p>
              </div>
            </div>

            <!-- Center Stats -->
            <div class="center-stats">
              <div class="stat">
                <span class="stat-icon"><i class="bi bi-geo-alt"></i></span>
                <span class="stat-text">{{ center.city }}, {{ center.state }}</span>
              </div>
              <div class="stat">
                <span class="stat-icon"><i class="bi bi-envelope"></i></span>
                <span class="stat-text">{{ center.email }}</span>
              </div>
              <div class="stat">
                <span class="stat-icon"><i class="bi bi-telephone"></i></span>
                <span class="stat-text">{{ center.phoneNumber }}</span>
              </div>
            </div>

            <!-- Card Footer Actions -->
            <div class="card-actions">
              <button class="btn-action btn-view" (click)="onView(center)" title="Ver detalles">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
                Ver
              </button>
              <button class="btn-action btn-edit" (click)="onEdit(center)" title="Editar">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                  <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                </svg>
                Editar
              </button>
              <!--button class="btn-action btn-delete" (click)="onDelete(center)" title="Eliminar">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="3 6 5 6 21 6"></polyline>
                  <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                  <line x1="10" y1="11" x2="10" y2="17"></line>
                  <line x1="14" y1="11" x2="14" y2="17"></line>
                </svg>
                Eliminar
              </button-->
            </div>
          </div>
        </div>
      }
    </div>
  }

  <!-- NO RESULTS -->
  @if (!loading() && !hasResults() && !isEmpty() && searchQuery()) {
    <div class="no-results">
      <div class="no-results-icon">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
          <line x1="8" y1="11" x2="14" y2="11"></line>
        </svg>
      </div>
      <h3>Sin resultados</h3>
      <p>No encontramos centros que coincidan con "{{ searchQuery() }}"</p>
      <button class="btn-reset-search" (click)="clearSearch()">Limpiar búsqueda</button>
    </div>
  }
</div>
