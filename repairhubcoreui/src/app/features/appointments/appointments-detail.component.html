<div class="detail-container">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <p>Loading appointment details...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="error-state">
    <p class="error-message">{{ error }}</p>
    <button class="btn btn-secondary" (click)="goBack()">Back</button>
  </div>

  <!-- Detail Content -->
  <div *ngIf="appointment && !isLoading" class="detail-content">
    <div class="detail-header">
      <h1>Appointment Details #{{ appointment.appointmentCode }}</h1>
      <div class="header-actions">
        <button class="btn btn-primary" 
                *ngIf="!appointment.cloused && !appointment.canceled"
                (click)="editAppointment()">
          <i class="bi bi-pencil-square"></i> Edit
        </button>
        <button class="btn btn-secondary" (click)="goBack()">Back</button>
      </div>
    </div>

    <div class="detail-grid">
      <!-- Basic Info -->
      <section class="detail-section">
        <h2>General Information</h2>
        
        <div class="detail-row">
          <label>Code:</label>
          <span>{{ appointment.appointmentCode }}</span>
        </div>
        <div class="detail-row">
          <label>Customer:</label>
          <span>{{ appointment.customer }}</span>
        </div>
        <div class="detail-row">
          <label>Center:</label>
          <span>{{ centerName }}</span>
        </div>
        <div class="detail-row">
          <label>Store:</label>
          <span>{{ storeName }}</span>
        </div>
      </section>

      <!-- Appointment Details -->
      <section class="detail-section">
        <h2>Appointment Details</h2>
        <div class="detail-row">
          <label>Date:</label>
          <span>{{ appointment.date }}</span>
        </div>
        <div class="detail-row">
          <label>Time:</label>
          <span>{{ appointment.time }}</span>
        </div>
        <div class="detail-row">
          <label>Duration:</label>
          <span>{{ appointment.duration }} minutes</span>
        </div>
        <div class="detail-row">
          <label>Device:</label>
          <span>{{ deviceName }}</span>
        </div>
        <div class="detail-row">
          <label>Service Type:</label>
          <span>{{ serviceTypeName }}</span>
        </div>
      </section>

      <!-- Status -->
      <section class="detail-section">
        <h2>Status</h2>
        <div class="detail-row">
          <label>Closed:</label>
          <span class="status-badge" [class.closed]="appointment.cloused">
            {{ appointment.cloused ? 'Yes' : 'No' }}
          </span>
        </div>
        <div class="detail-row">
          <label>Canceled:</label>
          <span class="status-badge" [class.canceled]="appointment.canceled">
            {{ appointment.canceled ? 'Yes' : 'No' }}
          </span>
        </div>
      </section>

      <!-- Notes -->
      <section class="detail-section full-width" *ngIf="appointment.notes">
        <h2>Notes</h2>
        <p class="notes-text">{{ appointment.notes }}</p>
      </section>

      <!-- Metadata -->
      <section class="detail-section">
        <h2>System Information</h2>
        <div class="detail-row">
          <label>Created by:</label>
          <span>{{ createdByName }}</span>
        </div>
        <div class="detail-row">
          <label>Created at:</label>
          <span>{{ appointment.createdAt | date: 'short' }}</span>
        </div>
      </section>
    </div>
  </div>
</div>