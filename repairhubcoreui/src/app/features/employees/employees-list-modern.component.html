<!-- üé® MODERN EMPLOYEES LIST TEMPLATE -->
<div class="employees-container">
  <!-- ============================================
       üìä HEADER SECTION
       ============================================ -->
  <div class="list-header">
    <div class="header-content">
      <div class="header-title">
        <h1>Employees</h1>
        <p class="subtitle">Manage your workforce</p>
      </div>

      <!-- Quick stats -->
      <div class="stats-grid">
        <div class="stat-card">
          <span class="stat-value">{{ stats().total }}</span>
          <span class="stat-label">Total</span>
        </div>
        <div class="stat-card accent-primary">
          <span class="stat-value">{{ stats().experts }}</span>
          <span class="stat-label">Experts</span>
        </div>
        <div class="stat-card accent-info">
          <span class="stat-value">{{ stats().accountants }}</span>
          <span class="stat-label">Accountants</span>
        </div>
        <div class="stat-card accent-warning">
          <span class="stat-value">{{ stats().admins }}</span>
          <span class="stat-label">Admins</span>
        </div>
        <div class="stat-card accent-secondary">
          <span class="stat-value">{{ stats().centerAdmins }}</span>
          <span class="stat-label">Center Admins</span>
        </div>
      </div>
    </div>

    <!-- Action buttons -->
    <div class="header-actions">
      <button class="btn-primary btn-lg" (click)="onCreateNew()">
        <span class="btn-icon"><i class="bi bi-plus"></i></span>
        New Employee
      </button>
    </div>
  </div>

    <!-- ============================================
      SEARCH & FILTER BAR
      ============================================ -->
  <div class="search-filter-bar">
    <div class="search-input-wrapper">
      <input
        type="text"
        class="search-input"
          placeholder="Search by name, email or code..."
        [value]="searchQuery()"
        (input)="updateSearch($event.target.value)"
      />
      <span class="search-icon"><i class="bi bi-search"></i></span>
      @if (searchQuery()) {
        <button class="btn-clear" (click)="clearSearch()" aria-label="Clear search">
          <i class="bi bi-x-lg" aria-hidden="true"></i>
        </button>
      }
    </div>

    <!-- Filters -->
    <div class="filters-group">
      <div class="filter-chip">
        <label>Tipo:</label>
        <select (change)="onFilterByEmployeeType($event)">
          <option value="">All</option>
          <option value="Expert">Expert</option>
          <option value="Accountant">Accountant</option>
          <option value="AdminStore">Store Admin</option>
        </select>
      </div>

      <div class="filter-chip">
        <label>Center Admin:</label>
        <select (change)="onFilterByCenterAdmin($event)">
          <option value="">All</option>
          <option value="true">Yes</option>
          <option value="false">No</option>
        </select>
      </div>

      @if (searchQuery() || state().selectedFilters.employeeType || state().selectedFilters.isCenterAdmin !== undefined) {
        <button class="btn-reset-filters" (click)="resetFilters()">
          <i class="bi bi-arrow-clockwise"></i>
          Reset
        </button>
      }
    </div>

    <button class="btn-refresh" (click)="onRefresh()" [disabled]="loading()">
      @if (loading()) {
        <span class="spinner"></span>
      } @else {
        <i class="bi bi-arrow-clockwise"></i>
      }
    </button>
  </div>

    <!-- ============================================
      ERROR STATE
      ============================================ -->
  @if (hasError()) {
    <div class="error-state" @cardEnter>
      <div class="error-icon"><i class="bi bi-exclamation-triangle-fill"></i></div>
      <h3>Error</h3>
      <p>{{ error() }}</p>
      <button class="btn-secondary" (click)="onRefresh()">Retry</button>
    </div>
  }

  <!-- ============================================
       ‚åõ LOADING STATE
       ============================================ -->
  @if (loading() && items().length === 0) {
    <div class="skeleton-grid">
      @for (_ of [1, 2, 3, 4, 5, 6]; track $index) {
        <div class="skeleton-card" @cardEnter>
          <div class="skeleton-header"></div>
          <div class="skeleton-content">
            <div class="skeleton-line"></div>
            <div class="skeleton-line short"></div>
          </div>
          <div class="skeleton-footer"></div>
        </div>
      }
    </div>
  }

  <!-- ============================================
       üì≠ EMPTY STATE
       ============================================ -->
  @if (isEmpty()) {
    <div class="empty-state" @cardEnter>
      <div class="empty-icon"><i class="bi bi-people"></i></div>
      <h3>No employees</h3>
      <p>Start by creating your first employee to see them listed here.</p>
      <button class="btn-primary" (click)="onCreateNew()">
        <span class="btn-icon"><i class="bi bi-plus"></i></span>
        Create Employee
      </button>
    </div>
  }

  <!-- ============================================
       üéØ MAIN CONTENT - BENTO GRID CARDS
       ============================================ -->
  @if (!isEmpty() && !loading() && !hasError()) {
    <div class="employees-grid" @listStagger>
      @for (employee of filteredItems(); track employee.id; let idx = $index) {
        <div class="employee-card" @cardEnter [style]="'animation-delay: ' + (idx * 50) + 'ms'">
          <!-- Card Header with Avatar -->
          <div class="card-header">
            <div class="avatar" [class]="'avatar-' + getEmployeeTypeColor(employee.employee_type)">
              {{ employee.firstName.charAt(0) }}{{ employee.lastName.charAt(0) }}
            </div>
            <div class="header-info">
              <h3 class="employee-name">{{ getFullName(employee) }}</h3>
              <span class="employee-code">{{ employee.employeeCode }}</span>
            </div>
            @if (employee.isCenterAdmin) {
              <div class="badge-admin"><i class="bi bi-award"></i> Center Admin</div>
            }
          </div>

          <!-- Card Body - Main Info -->
          <div class="card-body">
            <div class="info-group">
              <label class="info-label">Type</label>
              <div class="badge" [class]="'badge-' + getEmployeeTypeColor(employee.employee_type)">
                {{ getEmployeeTypeLabel(employee.employee_type) }}
              </div>
            </div>

            <div class="info-group">
              <label class="info-label">Email</label>
              <a href="mailto:{{ employee.email }}" class="info-value email-link">
                {{ employee.email }}
              </a>
            </div>

            <div class="info-row">
              <div class="info-group half">
                  <label class="info-label">Phone</label>
                <p class="info-value">{{ employee.phone }}</p>
              </div>
              <div class="info-group half">
                  <label class="info-label">Gender</label>
                <p class="info-value">
                  @if (employee.gender === 'Male') {
                    <i class="bi bi-gender-male"></i>
                  } @else {
                    <i class="bi bi-gender-female"></i>
                  }
                </p>
              </div>
            </div>

            <div class="info-row">
              <div class="info-group half">
                <label class="info-label">Position</label>
                <p class="info-value">{{ employee.jobTitle }}</p>
              </div>
              <div class="info-group half">
                <label class="info-label">City</label>
                <p class="info-value">{{ employee.city }}</p>
              </div>
            </div>
          </div>

          <!-- Card Footer - Actions -->
          <div class="card-footer">
            <button 
              class="btn-action btn-view"
              (click)="onSelect(employee)"
              title="View details"
            >
              <span class="btn-icon"><i class="bi bi-eye"></i></span>
              View
            </button>
            <button 
              class="btn-action btn-edit"
              (click)="onEdit(employee, $event)"
              title="Edit"
            >
              <span class="btn-icon"><i class="bi bi-pencil"></i></span>
              Edit
            </button>
            <!--button 
              class="btn-action btn-delete"
              (click)="onDelete(employee, $event)"
              title="Delete"
            >
              <span class="btn-icon">üóëÔ∏è</span>
              Delete
            </button-->
          </div>

          <!-- Metadata -->
          <div class="card-metadata">
            <small>Created: {{ employee.createdAt | date: 'short' }}</small>
            @if (employee.updatedAt) {
              <small>Updated: {{ employee.updatedAt | date: 'short' }}</small>
            }
          </div>
        </div>
      }
    </div>

    <!-- Filtered results counter -->
    @if (filteredItems().length !== items().length) {
      <div class="results-info">
        Showing {{ filteredItems().length }} of {{ items().length }} employees
      </div>
    }
  }
</div>
