<h2 *ngIf="isEdit">Edit Notification</h2>
<h2 *ngIf="!isEdit">Create Notification</h2>
<form [formGroup]="form" (ngSubmit)="onSubmit()" autocomplete="off">
  <label>Título: <input formControlName="title" autocomplete="off" /></label><br />
  <label>Mensaje: <textarea formControlName="message"></textarea></label><br />
  <label>Tipo:
    <select formControlName="type">
      <option value="system">System</option>
      <option value="alert">Alert</option>
      <option value="reminder">Reminder</option>
      <option value="announcement">Announcement</option>
      <option value="task">Task</option>
    </select>
  </label><br />
  <label>Priority:
    <select formControlName="priority">
      <option value="low">Low</option>
      <option value="medium">Medium</option>
      <option value="high">High</option>
      <option value="urgent">Urgent</option>
    </select>
  </label><br />
  <label>Status:
    <select formControlName="status">
      <option value="unread">Unread</option>
      <option value="read">Read</option>
      <option value="archived">Archived</option>
      <option value="deleted">Deleted</option>
    </select>
  </label><br />
  <label>Broadcast: <input type="checkbox" formControlName="isBroadcast" autocomplete="off" /></label><br />
  <label>URL de acción: <input formControlName="actionUrl" autocomplete="off" /></label><br />
  <label>Icono: <input formControlName="icon" autocomplete="off" /></label><br />
  <label>Expira en: <input type="date" formControlName="expiresAt" autocomplete="off" /></label><br />
  <label>Metadata (JSON): <textarea formControlName="metadata" rows="2"></textarea></label><br />
  <div *ngIf="form.get('metadata')?.invalid && form.get('metadata')?.touched" style="color:red">Debe ser un JSON válido.</div>
  <button type="submit" [disabled]="loading">{{ isEdit ? 'Update' : 'Create' }}</button>
  <a routerLink="/notifications">Cancel</a>
</form>
<div *ngIf="loading">Saving...</div>
